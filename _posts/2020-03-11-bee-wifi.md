---
date: 2020-03-11
title: WiFi-Bee
categories: hardware
description: Mit dem WiFi-Bee können die Messdaten deiner senseBox per WLAN übertragen werden.
type: Document
resources:
  - name: "Shop"
    link: https://sensebox.kaufen/product/wifi-bee
  - name: Atmel ATWINC1500 Data Sheet
    link: http://ww1.microchip.com/downloads/en/DeviceDoc/ATWINC15x0-MR210xB-IEEE-802.11-b-g-n-SmartConnect-IoT-Module-Data-Sheet-DS70005304C.pdf
image1: /images/2020-03-11-bee-wifi/wifi.png
image2: /images/2020-03-11-bee-wifi/1-test.png 
image3: /images/2020-03-11-bee-wifi/2-result.png 
image4: /images/2020-03-11-bee-wifi/3-updater.png 
image5: /images/2020-03-11-bee-wifi/4-firmware-updater.png 
image6: /images/2020-03-11-bee-wifi/5-test-connection.png 
image7: /images/2020-03-11-bee-wifi/6-update-firmware.png     
---
Das Wifi-Bee ist das Verbindungsstück, um die senseBox mit dem Internet zu verbinden. Die Daten der senseBox werden per WLAN (WiFi) in das bestehende Netzwerk übertragen. Das WiFi-Bee basiert auf dem ATWINC1500 Mikrochip von Atmel.


> Bei einigen unserer WiFi-Bees vom Typ WINC1500 kann es vorkommen, dass eine veraltete Firmware (Version 19.4.4) installiert ist. Das kann zu Übertragungsproblemen führen. Sollten diese Probleme bei dir auftreten, schaue dir !!!! an, um die Firmware zu aktualisieren.


{% include image.html image=page.image1 %}

## Technische Informationen

* "Plug-in-and-Go" senseBox kompatibel
* Single-band 2.4GHz b/g/n
* Betriebsspannung: 3.0V to 4.2V
* Verschlüsselungsprotokolle: WPA/WPA2 Personal, TLS, SSL
* Netzwerkdienste: DHCP, DNS, TCP/IP (IPv4), UDP, HTTP, HTTPS
* Bezeichnung: WINC1500
* Maße: 24mm x 25mm x 9mm
* Gewicht: 3,5 g

## Verbindungstest

Um die Verbindung des Bees mit dem Internet zu testen, also sowohl die Funktion der Komponente, als auch des Netzwerks zu prüfen, nutze den folgenden Sketch:

```arduino
#include <SPI.h>
#include <WiFi101.h>
#include <senseBoxIO.h>

void setup()
{
    // Initialisiert den seriellen Monitor
    Serial.begin(9600);

    // Starte WINC1500 (WiFi-Bee) in XBEE1 Socket neu
    senseBoxIO.powerXB1(false);
    delay(250);
    senseBoxIO.powerXB1(true);
}

void loop()
{
    delay(5000);
    // Gibt installierte und aktuellste Firmware Version aus
    String fv = WiFi.firmwareVersion();
    Serial.print("Firmware installed: ");
    Serial.println(fv);
    Serial.print("Latest firmware: ");
    Serial.println(WIFI_FIRMWARE_LATEST_MODEL_B);

    // Gibt IP-Adresse der senseBox aus
    IPAddress ip = WiFi.localIP();
    Serial.print("IP: ");
    Serial.println(ip);
    delay(5000);
}
```

Wenn bei allen Ausgaben im seriellen Monitor Werte angezeigt werden, insbesondere die IP-Adresse in etwa in der Form _192.107.256.4_ ausgegeben wird, ist das WiFi-Bee richtig initialisiert und die senseBox kann mit dem Internet genutzt werden.

## Firmware des WiFi-Bees updaten

>Leider haben einige unserer WiFi Bees vom Typ WINC1500 eine veraltete Firmware (Version 19.4.4) installiert. Leider gibt es keine andere Möglichkeit dieses Firmware zu updaten als es manuell durchzuführen. Im folgenden Kapitel wird erklärt wie man rausfindet welche Firmware man benutzt und (falls man eine veraltete Version hat) wie man diese updatet.

### Test der Version

Zuerst muss du überprüfen welche Version dein WiFi-Bee hat. Gehe dazu in der Arduino IDE auf `Datei` -> `Beispiele` und unter `"Beispiele für senseBox MCU"` auf `Test_WINC1500`.

{% include image.html image=page.image2 %}

Lade nun den Sketch auf dein Board (durch klicken des Pfeil-Symbols). Beachte, dass auf deinem senseBox Board das WiFi-Bee aufgesteckt sein muss (bitte auf XBEE1 aufstecken). Klicke dann auf den seriellen Monitor (durch klicken des Lupen-Symbols) und es wird geprüft ob dein Wifi-Bee funktionsfähig ist und angezeigt welche Firmware darauf installiert ist.

{% include image.html image=page.image3 %}

>Wenn du eine Firmware <b>19.5.2, oder höher</b> hast kannst du hier abbrechen. Dein WiFi-Bee funktioniert einwandfrei.
>Wenn du eine Firmware <b>geringer als 19.5.2</b> hast musst du leider die Firmware updaten. Wie das funktioniert erfährst du im nächsten Schritt.

### WiFi-Bee Firmware Update

Um die Firmware zu aktualisieren, folge dem Pfad von oben: `Datei` -> `Beispiele` und unter `"Beispiele für senseBox MCU"` auf `WINC1500_Updater`.

{% include image.html image=page.image4 %}

Lade nun den Sketch auf dein Board (durch klicken des Pfeil-Symbols), auf welchem das WiFi-Bee aufgesteckt ist (bitte auf XBEE1 aufstecken).

Anschließend musst du auf `Werkzeuge` klicken und `Wifi 101 Firmware Updater` auswählen.

{% include image.html image=page.image5 %}

Zuerst kannst du die Verbindung testen, indem du auf den angezeigten `COM Port` klickst und danach auf `Test connection`. Es sollte folgende Information zurück kommen: `"The programmer is working!"`

{% include image.html image=page.image6 %}

Fast geschafft, jetzt nur noch auf `Update Firmware` klicken und der Upload beginnt. Danach sollte eine Erfolgsmeldung kommen `"The firmware has been updated!"`.

{% include image.html image=page.image7 %}
